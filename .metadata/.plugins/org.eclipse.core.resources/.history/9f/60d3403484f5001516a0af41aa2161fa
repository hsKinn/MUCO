package com.ktds.muco.table.place.biz;

import java.util.List;

import com.ktds.muco.table.place.dao.PlaceDAO;
import com.ktds.muco.table.place.vo.PlaceListVO;
import com.ktds.muco.table.place.vo.PlaceSearchVO;
import com.ktds.muco.table.place.vo.PlaceVO;

/**
 * 
 * @author 김광민
 *
 */
public class PlaceBiz {
	/**
	 * 
	 * @author 김동규
	 *
	 */
	private PlaceDAO placeDAO;

	public PlaceBiz() {
		placeDAO = new PlaceDAO();
	}

	public List<PlaceVO> placeInfoRecommendedList() {
		return placeDAO.placeInfoRecommendedList();
	}

	public int placeInfoCreate(PlaceVO placeVO) {

		String Description = placeVO.getDescription();
		Description = Description.replaceAll("\n", "<br/>");
		placeVO.setDescription(Description);
		return placeDAO.insertPlaceInfo(placeVO);
	}
	
	/**
	 * @author 이기연
	 * @param placeSearchVO
	 * @return
	 */
	public PlaceListVO getPlaceList(PlaceSearchVO placeSearchVO) {
		// 1. 전체 게시글의 수
		int allMemberCount = memberDAO.getAllMemberCount();
		// 1-1. 기본으로 페이지를 만들어준다. 
		Paging paging = new Paging();
		paging.setTotalArticleCount(allMemberCount);
		// 1-2. page 가져올 때 계산 쉽게 하기 위해서 page number은 0부터 시작 
		paging.setPageNumber(searchVO.getPageNO()+"");
		
		searchVO.setStartIndex(paging.getStartArticleNumber());
		searchVO.setEndIndex(paging.getEndArticleNumber());
		
		//전체 article 받아오기
		List<MemberVO> members = memberDAO.getAllMembers(searchVO);
		
		// 2. DAO로부터 받아온 결과를 출력
		MemberListVO memberList = new MemberListVO();
		memberList.setMemberList(members);
		// 2-2. 페이지 추가 
		memberList.setPaging(paging);
		
		return memberList;
		
		return null;
	}

}
