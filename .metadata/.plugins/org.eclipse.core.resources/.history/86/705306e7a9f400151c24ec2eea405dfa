package com.ktds.muco.table.place.biz;

import java.util.List;

import com.ktds.muco.table.place.dao.PlaceDAO;
import com.ktds.muco.table.place.vo.PlaceVO;

/**
 * 
 * @author 김광민
 *
 */
public class PlaceBiz {
	/**
	 * 
	 * @author 김동규
	 *
	 */
	private PlaceDAO placeDAO;

	public PlaceBiz() {
		placeDAO = new PlaceDAO(); 
	}

	public List<PlaceVO> PlaceInfoRecommendedList() {
		// 1page가 0번으로 시작한다는 이야기 - 페이지가 시작하는 번호와 끝나는 번호를 같이 불러올 수 있다.(paging 유틸 내부에서 지정되어있음)
		int allArticleCount = 0;
		List<ArticleVO> articles = null;

		
		if ( searchVO.getSearchType().equals("1")) {
			allArticleCount = adao.getAllArticleCount(searchVO);
		} else if ( searchVO.getSearchType().equals("2")) {
			allArticleCount = adao.getSearchMemberIdCount(searchVO);
		} else if ( searchVO.getSearchType().equals("3")) {
			allArticleCount = adao.getSearchNickNameCount(searchVO);
		}
		
		Paging paging = new Paging();
		paging.setTotalArticleCount(allArticleCount);
		paging.setPageNumber(searchVO.getPageNo() + ""); 
		
		searchVO.setStartIndex( paging.getStartArticleNumber() );
		searchVO.setEndIndex( paging.getEndArticleNumber() );

		if ( searchVO.getSearchType().equals("1")) {
			articles = adao.allArticle(searchVO);
		} else if ( searchVO.getSearchType().equals("2")) {
			articles = adao.searchMemberId(searchVO);
		} else if ( searchVO.getSearchType().equals("3")) {
			articles = adao.searchNickName(searchVO);
		}
		
		ArticleListVO articleList = new ArticleListVO();
		articleList.setArticleList(articles);
		articleList.setPaging(paging);
		
		return articleList;
	}
	
	public int placeInfoCreate(PlaceVO placeVO) {
	
		String Description = placeVO.getDescription();
		Description = Description.replaceAll("\n", "<br/>");
		placeVO.setDescription(Description);
		return 	placeDAO.insertPlaceInfo(placeVO);
	}


}
