package com.ktds.muco.table.pack.biz;

import java.util.ArrayList;
import java.util.List;

import com.ktds.muco.table.pack.dao.PackDAO;
import com.ktds.muco.table.pack.vo.PackListVO;
import com.ktds.muco.table.pack.vo.PackSearchVO;
import com.ktds.muco.table.pack.vo.PackVO;
import com.ktds.muco.util.web.Paging;

/**
 * 
 * @author 김광민
 *
 */
public class PackBiz {
	
	private SharePackDAO packDAO;
	
	public PackBiz() {
		packDAO = new SharePackDAO();
	}

	public PackListVO getAllPackageList(PackSearchVO packSearchVO) {
		
		int allPackageCount = 0;
		int allPackageCountByHashTag = 0;
		
		Paging paging = new Paging(6);
		List<PackVO> packages = new ArrayList<PackVO>();
		
		// Count
		if ( packSearchVO.getSearchKeyword() != null ) {
			
			allPackageCountByHashTag = packDAO.getAllPackageCountByHashTag(packSearchVO);
			paging.setTotalArticleCount(allPackageCountByHashTag);
		}
		else {
			allPackageCount = packDAO.getAllPackageCount(packSearchVO);
			paging.setTotalArticleCount(allPackageCount);
		}
		
		paging.setPageNumber( packSearchVO.getPageNo() + "");
		
		packSearchVO.setStartIndex( paging.getStartArticleNumber());
		packSearchVO.setEndIndex( paging.getEndArticleNumber() );
		
		// Get List
		if ( packSearchVO.getSearchKeyword() != null ) {
			
			packages = packDAO.getAllPackageListByHashTag(packSearchVO);
		}
		else {
			packages = packDAO.getAllPackageList(packSearchVO);
		}		
		
		PackListVO packList = new PackListVO();
		packList.setPackList(packages);
		packList.setPaging(paging);
		
		return packages;
	}
	

}
